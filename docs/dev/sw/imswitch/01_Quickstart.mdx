import OpenUC2Tree from './IMAGES/openuc2_software_tree.svg';

# Quickstart Guide: Using Raspberry Pi with ImSwitch and UC2-ESP

The Raspberry Pi serves as a bridge between the UC2-ESP board and a USB3 camera, running the ImSwitch software inside a Docker container. The system allows you to control the microscope through a web interface accessible from a phone or laptop.

> **Note:** This setup is experimental! You can try a demo version of the latest ImSwitch here:
> - [Live Demo](https://imswitch.openuc2.com/imswitch/index.html) (currently not active)
> - [React Demo](https://youseetoo.github.io/imswitch) 
> - [ImSwitch API](https://youseetoo.github.io/api/api.html) (may be outdated)



## Overview Chart 

The below diagramm visualizes the different modules that are connected to the openUC2 ecosystem. You can click on (most of) the bubbles to get to the dedicated repositories. You can find the draw.io template [here](https://github.com/openUC2/openUC2-mgmt-wiki/blob/main/tools/openUC2_-SoftwareDiagram.drawio.xml)


<OpenUC2Tree />


## Getting Started

### Accessing ImSwitch
Refer to our [usage guides](../../../usage/pro/frame/guides/day-1/sw-access/README.md#how-to-access-browser-apps).

### Modifying ImSwitch Configuration
To adjust settings, edit the configuration file:
```sh
nano ~/ImSwitchConfig/config/imcontrol_options.json
```
For example, changing the active setup file:
```json
{
    "setupFileName": "example_uc2_vimba.json",
    "recording": {
        "outputFolder": "./ImSwitch/ImSwitch/recordings",
        "includeDateInOutputFolder": true
    }
}
```

More details: [ImSwitchConfig GitHub](https://github.com/openUC2/imswitchconfig)

---

## Hardware Setup
- Connect **UC2-ESP Board** via USB to the Raspberry Pi
- Connect **USB3 Camera** to Raspberry Pi


---

## Installing Raspberry Pi OS & ImSwitch

This is a compiled image for the Raspberry Pi 5 to deploy ImSwitch in Docker. It's built at [github.com/openUC2/os-rpi](https://github.com/openUC2/os-rpi)

Requirements:
- microSD Card with >32GB
- Raspberry Pi 5 (8GB RAM recommended)
- microSD Card reader

Installation:
1. **Download the image** [from Google Drive](https://drive.google.com/drive/folders/1i5baXgEq9UAybYQGHqEnLtaQ7-Js22MK)
2. **Flash it to an SD card** using [Raspberry Pi Imager](https://www.raspberrypi.com/software/).

### Flashing the Image
Use the Raspberry Pi Imager to flash the image onto an SD card, then insert the SD card into the Raspberry Pi and boot it.

![](./IMAGES/imswitchraspi/RaspiOS_2.png)

1. Select your Raspberry Pi model.
2. Choose the downloaded image file as the OS type.
3. Select the SD card as the target.
4. Do **not** specify additional user-specific settings.

### Default Credentials
- **SSID:** `openUC2-XXXX` (`XXX` corresponds to a random number bsed on the MAC address)
- **WiFi Password:** `youseetoo` (now: `youseetoo`)
- **Username:** `pi`
- **User Password:** `youseetoo`


### Installing software updates

Refer to our [usage guides](../../../usage/pro/frame/guides/day-2/sw-updates/README.md).

### Troubleshooting pallet configurations

If you are facing a problem with a wrong docker configuration (i.e. Docker Compose File is not correct), you can do a temporarily fix by editing the Docker compose file at `~/.local/share/forklift/pallet/packages/imswitch/compose.yml`  on the Raspberry Pi, and then run `forklift pallet stage --no-cache-img` and reboot. The location `~/.local/share/forklift/pallet` is in fact the git repo of the https://github.com/openUC2/pallet repo.



## Summary
- The **manual installation** allows full customization of Raspberry Pi OS and software.
- The **pre-built image** provides a quick and reliable setup, including all necessary drivers.


---

## Troubleshooting & Support
- If you encounter issues, check the logs using:
```sh
docker logs $(docker ps -q --filter ancestor=ghcr.io/openuc2/imswitch-noqt-arm64:latest)
```
- Join our community for help: [OpenUC2 GitHub](https://github.com/openUC2/)

Happy experimenting!
