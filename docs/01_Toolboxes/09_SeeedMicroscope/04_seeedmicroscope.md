# ESP32 XIAO Sense-based microscope

More information can be found here https://github.com/openUC2/openUC2-SEEED-XIAO-Camera

**HINT:** The z-stage looks a little different now:

## Introduction
Welcome to our workshop on building a modular microscope! In this hands-on session, we will guide you through the process of assembling a simple microscope using a modular system. The microscope will consist of a camera, a mirror assembly holder, and a light source. The assembled microscope will allow you to observe and capture images of samples using a smartphone or a computer.

![](IMAGES/IMG_20230523_103623.jpg)

## Materials Needed
1. Camera (esp32 camera module)
2. Mirror Assembly Holder
3. Light Source
4. Finite Corrected Microscope Objective Lens
5. Puzzle Pieces (provided in the kit)

## Overview of Assembly
The microscope's general assembly involves setting up a light source to illuminate the sample, a finite corrected microscope objective lens with a joint-based focusing mechanism, a folding mirror to adjust the distance between the lens and the camera, and finally, the camera itself. The camera is an esp32 camera module that can connect to your smartphone or computer through Wi-Fi or USB.

![](IMAGES/Seeedmicroscope.PNG)

## Step-by-Step Assembly Guide

### Step 1: Setting Up the Camera
1. Connect the camera to a USB power source to create a Wi-Fi access point.
2. On your smartphone, go to the Wi-Fi settings and connect to the access point named "Matchboxscope-****."
3. Open your web browser and enter the camera's IP address. This will open a control interface for the camera.
4. Adjust the camera's settings as needed and make sure to start the camera stream by clicking the "Start Stream" button.

### Step 2: Placing the Camera Cube
1. Place the camera cube and two puzzle pieces on a stable surface.
2. Position the camera on top of the cube and secure it in place using the puzzle pieces.

### Step 3: Adding the Mirror
1. Position the mirror next to the camera cube in a way that allows you to view the camera sensor through the mirror.
2. Securely attach the mirror to the camera cube using the provided puzzle pieces.

### Step 4: Attaching the Objective Lens
1. Take the empty cube and position it next to the camera and mirror assembly.
2. Carefully insert the finite corrected microscope objective lens into the cube.

### Step 5: Finalizing the Microscope
1. Connect the empty cube with the objective lens to the camera cube using the provided puzzle pieces.
2. Ensure that all components are securely attached and aligned properly.


## Assembly with photos


**All necessary parts**
![Seeedmicroscope_1](./IMAGES/seeed/Seeedmicroscope_1.jpg)

### Mirror Cube

**All necessary parts**
![Seeedmicroscope_2](./IMAGES/seeed/Seeedmicroscope_2.jpg)

**Add Mirror to holder** (Mirror has double-sided sticky tape)
![Seeedmicroscope_3](./IMAGES/seeed/Seeedmicroscope_3.jpg)

**Add Holder to Cube**
![Seeedmicroscope_4](./IMAGES/seeed/Seeedmicroscope_4.jpg)

### Manual Z-stage

**All necessary parts**
![Seeedmicroscope_5](./IMAGES/seeed/Seeedmicroscope_5.jpg)

**Add 5mm rods to base** (tricky part since the holes are just large enough to hold the rods, be careful not to destroy the base)

![Seeedmicroscope_6](./IMAGES/seeed/Seeedmicroscope_6.jpg)

**Add slide and second rod and close base**
![Seeedmicroscope_7](./IMAGES/seeed/Seeedmicroscope_7.jpg)

**Add knob with one screw**
![Seeedmicroscope_8](./IMAGES/seeed/Seeedmicroscope_8.jpg)

**When adding second screw make sure you have slide and knob down so that you can move the slide along the z-axis freely**
![Seeedmicroscope_9](./IMAGES/seeed/Seeedmicroscope_9.jpg)

**Add objective (Attention: mount the objective not on the side of the rib!!)**
![Seeedmicroscope_10](./IMAGES/seeed/Seeedmicroscope_10.jpg)

**Add module to cube**
![Seeedmicroscope_11](./IMAGES/seeed/Seeedmicroscope_11.jpg)


### Seeed Xiao Sense Camera Cube

**All necessary parts**
![Seeedmicroscope_12](./IMAGES/seeed/Seeedmicroscope_12.jpg)

**Unpack Camera**
![Seeedmicroscope_13](./IMAGES/seeed/Seeedmicroscope_13.jpg)

**Assemble Camera**
![Seeedmicroscope_14](./IMAGES/seeed/Seeedmicroscope_14.jpg)

**Remove lens from camera sensor (Be careful!!) by unscrewing it using pliers**
![Seeedmicroscope_15](./IMAGES/seeed/Seeedmicroscope_15.jpg)

**Have Camera seperate makes it easier to unscrew the lens**
![Seeedmicroscope_16](./IMAGES/seeed/Seeedmicroscope_16.jpg)

**Add camera back to the xiao module**
![Seeedmicroscope_17](./IMAGES/seeed/Seeedmicroscope_17.jpg)

**Place camera in cube insert**
![Seeedmicroscope_18](./IMAGES/seeed/Seeedmicroscope_18.jpg)

**Make sure camera lurkes through the hole**
![Seeedmicroscope_19](./IMAGES/seeed/Seeedmicroscope_19.jpg)

**Add lid with screws**
![Seeedmicroscope_20](./IMAGES/seeed/Seeedmicroscope_20.jpg)

**Stick wifi antenna round the edge**
![Seeedmicroscope_21](./IMAGES/seeed/Seeedmicroscope_21.jpg)

**Place inside cube**
![Seeedmicroscope_22](./IMAGES/seeed/Seeedmicroscope_22.jpg)

**Make sure USB entry is facing to one side without the pins**
![Seeedmicroscope_23](./IMAGES/seeed/Seeedmicroscope_23.jpg)

### Sample and Light Cube

**All necessary parts**
![Seeedmicroscope_24](./IMAGES/seeed/Seeedmicroscope_24.jpg)

**ADd light to insert**
![Seeedmicroscope_25](./IMAGES/seeed/Seeedmicroscope_25.jpg)

**Add sample mount to cube and close it**
![Seeedmicroscope_26](./IMAGES/seeed/Seeedmicroscope_26.jpg)

### Final assembly of all cubes

**All cubes**
![Seeedmicroscope_27](./IMAGES/seeed/Seeedmicroscope_27.jpg)


**First layer: Have to puzzle pieces and add camera and mirror cube**
![Seeedmicroscope_29](./IMAGES/seeed/Seeedmicroscope_29.jpg)

**Second layer: Have to puzzle pieces and add z-stage and empty cube**
![Seeedmicroscope_30](./IMAGES/seeed/Seeedmicroscope_30.jpg)
![Seeedmicroscope_31](./IMAGES/seeed/Seeedmicroscope_31.jpg)

**Merge first and second layer**
![Seeedmicroscope_32](./IMAGES/seeed/Seeedmicroscope_32.jpg)

**Add two more puzzle pieces and add sample/light cube**
![Seeedmicroscope_33](./IMAGES/seeed/Seeedmicroscope_33.jpg)

### Flashing software

Go to https://matchboxscope.github.io/firmware/FLASH.html and select XIAO and connect to the board
![Seeedmicroscope_34](./IMAGES/seeed/Seeedmicroscope_34.jpg)

**Select the port and connect (Chrome only!)**
![Seeedmicroscope_35](./IMAGES/seeed/Seeedmicroscope_35.jpg)

**Flash the firmware and wait until done**
![Seeedmicroscope_36](./IMAGES/seeed/Seeedmicroscope_36.jpg)

**Turn on the light**
![Seeedmicroscope_37](./IMAGES/seeed/Seeedmicroscope_37.jpg)

**Search for Wifi Matchboxscope-XXX and connect, go to http://192.168.4.1**

**Turn on Stream and find sample in focus**
![Seeedmicroscope_39](./IMAGES/seeed/Seeedmicroscope_39.jpg)
![Seeedmicroscope_40](./IMAGES/seeed/Seeedmicroscope_40.jpg)

**Focus sample with manual focusing stage**
![Seeedmicroscope_41](./IMAGES/seeed/Seeedmicroscope_41.gif)

### Using an Android APP

For Android users, plesae have a look here:
https://matchboxscope.github.io/docs/APP

This app will help you connect and capture images using this microscope. 

## Conclusion
Congratulations! You have successfully assembled your modular microscope. With this microscope, you can now observe various samples and capture images using the camera connected to your smartphone or computer. This modular design allows for easy customization and experimentation, making it a versatile tool for exploring the microscopic world.

Remember, the performance of the microscope might be affected by the modifications made to the objective lens, so adjust your expectations accordingly. Enjoy exploring and discovering the hidden wonders of the microcosmos!
