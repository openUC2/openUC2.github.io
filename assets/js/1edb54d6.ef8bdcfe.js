"use strict";(self.webpackChunkuc_2_docs=self.webpackChunkuc_2_docs||[]).push([[6299],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=c(n),m=a,k=d["".concat(s,".").concat(m)]||d[m]||u[m]||l;return n?r.createElement(k,i(i({ref:t},p),{},{components:n})):r.createElement(k,i({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,i=new Array(l);i[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,i[1]=o;for(var c=2;c<l;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},49743:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var r=n(87462),a=(n(67294),n(3905));const l={id:"Laser",title:"Laser"},i="UC2-ESP Laser Control API Documentation",o={unversionedId:"Electronics/Advanced/UC2-ESP32/APIDescription/Laser",id:"Electronics/Advanced/UC2-ESP32/APIDescription/Laser",title:"Laser",description:"The UC2-ESP firmware provides an API for controlling lasers using PWM (Pulse Width Modulation). It allows adjusting laser intensity, setting PWM frequency and resolution, and optionally enabling despeckle mode, which modulates laser output to reduce speckle noise.",source:"@site/docs/04_Electronics/10_Advanced/01_UC2-ESP32/APIDescription/Laser.md",sourceDirName:"04_Electronics/10_Advanced/01_UC2-ESP32/APIDescription",slug:"/Electronics/Advanced/UC2-ESP32/APIDescription/Laser",permalink:"/docs/Electronics/Advanced/UC2-ESP32/APIDescription/Laser",draft:!1,tags:[],version:"current",frontMatter:{id:"Laser",title:"Laser"},sidebar:"tutorialSidebar",previous:{title:"LED array",permalink:"/docs/Electronics/Advanced/UC2-ESP32/APIDescription/LEDArray"},next:{title:"Motor",permalink:"/docs/Electronics/Advanced/UC2-ESP32/APIDescription/Motor"}},s={},c=[{value:"Endpoint",id:"endpoint",level:2},{value:"Request Format",id:"request-format",level:2},{value:"JSON Parameters Description",id:"json-parameters-description",level:2},{value:"Example Requests",id:"example-requests",level:2},{value:"Turn off Laser 1",id:"turn-off-laser-1",level:3},{value:"Set Laser 2 to PWM value 1023",id:"set-laser-2-to-pwm-value-1023",level:3},{value:"Set Laser 3 with despeckle",id:"set-laser-3-with-despeckle",level:3},{value:"Response",id:"response",level:2},{value:"Despeckle Functionality",id:"despeckle-functionality",level:2},{value:"Query Current Laser Settings",id:"query-current-laser-settings",level:2},{value:"Conclusion",id:"conclusion",level:2}],p={toc:c};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"uc2-esp-laser-control-api-documentation"},"UC2-ESP Laser Control API Documentation"),(0,a.kt)("p",null,"The UC2-ESP firmware provides an API for controlling lasers using PWM (Pulse Width Modulation). It allows adjusting laser intensity, setting PWM frequency and resolution, and optionally enabling despeckle mode, which modulates laser output to reduce speckle noise."),(0,a.kt)("h2",{id:"endpoint"},"Endpoint"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Endpoint:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"/laser_act")),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"/laser_act")," endpoint is used to configure laser settings, including PWM intensity, despeckle functionality, and related parameters."),(0,a.kt)("h2",{id:"request-format"},"Request Format"),(0,a.kt)("p",null,"The API expects a JSON document structured as follows:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "task": "/laser_act",\n  "qid": 1,\n  "LASERid": 1,\n  "LASERval": 1023,\n  "LASERdespeckle": 100,\n  "LASERdespecklePeriod": 50,\n  "LASERFreq": 1000,\n  "LASERRes": 10\n}\n')),(0,a.kt)("h2",{id:"json-parameters-description"},"JSON Parameters Description"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"task"),": Specifies the requested task, set to ",(0,a.kt)("inlineCode",{parentName:"li"},"/laser_act")," for laser control actions."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"qid"),": (optional) Queue ID for tracking the command."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"LASERid"),": ID of the laser to control (values: 0, 1, 2, 3)."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"LASERval"),": PWM value for laser intensity (range depends on PWM resolution)."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"LASERdespeckle"),": (optional) Enables despeckle mode, causing the laser intensity to wobble around the set value for speckle reduction."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"LASERdespecklePeriod"),": (optional) Period for despeckling in milliseconds."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"LASERFreq"),": (optional) PWM frequency to use (Hz)."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"LASERRes"),": (optional) PWM resolution to use (bits).")),(0,a.kt)("h2",{id:"example-requests"},"Example Requests"),(0,a.kt)("h3",{id:"turn-off-laser-1"},"Turn off Laser 1"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{"task": "/laser_act", "LASERid":1, "LASERval": 0}\n')),(0,a.kt)("h3",{id:"set-laser-2-to-pwm-value-1023"},"Set Laser 2 to PWM value 1023"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{"task": "/laser_act", "LASERid":2, "LASERval": 1023}\n')),(0,a.kt)("h3",{id:"set-laser-3-with-despeckle"},"Set Laser 3 with despeckle"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{"task": "/laser_act", "LASERid":3, "LASERval":150, "LASERdespeckle":500, "LASERdespecklePeriod":100}\n')),(0,a.kt)("h2",{id:"response"},"Response"),(0,a.kt)("p",null,"The API returns the provided ",(0,a.kt)("inlineCode",{parentName:"p"},"qid")," upon successful completion of the command."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{"success":1}\n')),(0,a.kt)("p",null,"where 1 tells us the qid."),(0,a.kt)("h2",{id:"despeckle-functionality"},"Despeckle Functionality"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"LASERdespeckle")," parameter introduces intensity oscillations around the specified ",(0,a.kt)("inlineCode",{parentName:"p"},"LASERval")," to reduce speckle effects. It defines the range around the central PWM value for random variations."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"LASERdespeckle"),": Max deviation from central PWM value."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"LASERdespecklePeriod"),": Time period (ms) between despeckle adjustments.")),(0,a.kt)("h2",{id:"query-current-laser-settings"},"Query Current Laser Settings"),(0,a.kt)("p",null,"To retrieve the current laser configuration:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{"task": "/laser_get", "qid":1}\n')),(0,a.kt)("p",null,"This will return a JSON document with pins and current PWM values for each laser."),(0,a.kt)("h2",{id:"conclusion"},"Conclusion"),(0,a.kt)("p",null,"The UC2-ESP Laser Control API allows intuitive control of laser modules via PWM, supporting intensity adjustments and despeckle for improved image quality, suitable for automated and precise optical experiments."))}u.isMDXComponent=!0}}]);